<% if (theme.gitalk.enable && post.comments) { %>
<div class="gitalk" id="gitalk-container"></div>
<%- css('https://fastly.jsdelivr.net/npm/gitalk@1.8.0/dist/gitalk.min.css') %>
<%- js('https://fastly.jsdelivr.net/npm/gitalk@1.8.0/dist/gitalk.min.js') %>
<%- js('https://fastly.jsdelivr.net/npm/blueimp-md5@2.19.0/js/md5.min.js') %>
<script type="text/javascript">
  var config = JSON.parse(atob('<%- object_tools("stringifytob64", theme.gitalk) %>'));
  delete config['enable'];
  var gitalk = new Gitalk(Object.assign({}, config, {
    id: md5(location.pathname),
    distractionFreeMode: false,  // Facebook-like distraction free mode
    pagerDirection: 'last'
  }));
  gitalk.render('gitalk-container');
</script>
<% } %>

<style>
  #gitalk-container * {
    background-color: rgba(0,0,0,0);
  }

  #gitalk-container .gt-container .gt-btn-login, #gitalk-container .gt-container .gt-btn-public {
    background-color: #6190e8!important;
  }

  #gitalk-container .gt-container .gt-comment-content:hover {
    box-shadow: none;
    border-radius: 5px;
    background-color: rgba(0,0,0,0.05);
  }

  #gitalk-container .gt-popup {
    border-radius: 5px;
    background-color: #fff!important;
  }

</style>
