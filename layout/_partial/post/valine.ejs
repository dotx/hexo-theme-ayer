<% if (!index && theme.leancloud && theme.leancloud.enable && post.comments){ %>
<!-- valine评论 -->
<div id="vcomments-box">
  <div id="vcomments"></div>
</div>
<script src="https://fastly.jsdelivr.net/npm/leancloud-storage@3/dist/av-min.js"></script>
<script src="https://fastly.jsdelivr.net/npm/valine@1.5.1/dist/Valine.min.js"></script>
<script src="/js/jquery-3.6.0.min.js"></script>
<script>
  new Valine({
    el: "#vcomments",
    app_id: "<%- theme.leancloud.app_id %>",
    app_key: "<%- theme.leancloud.app_key %>",
    path: window.location.pathname,
    avatar: "<%- theme.valine.avatar %>",
    avatar_cdn: "<%- theme.valine.avatar_cdn %>",
    placeholder: "<%- theme.valine.placeholder %>",
    serverURLs: "<%- theme.valine.serverURLs %>",
    enableQQ: "<%- theme.valine.enableQQ %>",
    recordIP: true,
  });
  const infoEle = document.querySelector("#vcomments .info");
  if (infoEle && infoEle.childNodes && infoEle.childNodes.length > 0) {
    infoEle.childNodes.forEach(function (item) {
      item.parentNode.removeChild(item);
    });
  }
</script>
<style>
  #vcomments-box #vcomments {
    background-color: #fff;
  }

  .v .vlist .vcard .vh {
    padding-right: 20px;
  }

  .v .vlist .vcard {
    padding-left: 10px;
  }

  .vheader .vinput {
    border-bottom-style: solid!important;
  }

  .vinput:focus {
    border-bottom-color: #ccc!important;
  }

  .vinput {
    color: #403e3e!important;
  }

  #vcomments p, #vcomments input {
    color: #403e3e;
  }
</style>
<% } %>
